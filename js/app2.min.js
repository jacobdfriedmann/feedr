$(document).ready(function(){function t(){var t=$("#login-template").html(),n=Handlebars.compile(t),o=n(e);$("#loginContainer").html(o)}function n(){var t=$("#category-template").html(),n=Handlebars.compile(t),o=n(e);$("#categories").html(o)}function o(){var t=$("#article-template").html(),n=Handlebars.compile(t),o=n(e);$("#main").html(o)}function l(){t(),$("#loginContainer").on("click","#loginSubmit",i),$("#categories").on("click",".label",a),$("#main").on("click","article",d)}function i(){var n=$("#username").val();$.post("/login",{username:n},function(o){e.loggedIn=!0,e.userId=o.userId,e.username=n,r(),s(),t()})}function r(){$.get("/categories?userId="+e.userId,function(t){e.categories=t,n()})}function s(){$.get("/feed?userId="+e.userId,function(t){e.articles=t,o()})}function a(){var t=$(this).text();$(this).hasClass("label-default")?$.post("/interests/"+t+"?userId="+e.userId,function(e){r(),s()}):$.ajax({type:"DELETE",url:"/interests/"+t+"?userId="+e.userId,success:function(e){r(),s()}})}function d(){var t=$(this).index(),n=e.articles[t],o=n.id,l=n.bookmarked;l?$.ajax({type:"DELETE",url:"/bookmarks/"+o+"?userId="+e.userId,success:function(e){s()}}):$.post("/bookmarks/"+o+"?userId="+e.userId,function(e){s()})}var e={loggedIn:!1,userId:void 0,username:void 0,categories:void 0,articles:void 0};l()});